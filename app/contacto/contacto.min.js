(function(){angular.module("bayres.contacto",[]).config(["$routeProvider",function(b){b.when("/contacto",{templateUrl:"contacto/contacto.html",controller:"ContactoController",data:{requiresLogin:false}})}]).controller("ContactoController",a);a.$inject=["$scope","$location","$timeout","AcUtils","LinksService","CartVars","BayresService","BayresMailerService"];function a(m,f,d,e,l,g,k,h){var c=this;c.message="";c.showError=false;c.enviado=false;c.sendConsulta=b;c.home=i;c.contactoForm={asunto:"",nombre:"",mail:"",consulta:""};function j(){c.enviado=false;f.path("/main");l.selectedIncludeTop="main/ofertas.html";g.broadcast()}function i(){f.path("/main");l.selectedIncludeTop="main/ofertas.html";g.broadcast()}function b(){c.showError=true;if(c.contactoForm.nombre==undefined||c.contactoForm.nombre.trim().length==0){c.message="El Nombre es Obligatorio";c.error_code=1;return}if(c.contactoForm.mail==undefined||c.contactoForm.mail.trim().length==0){c.message="El Mail es Obligatorio";c.error_code=2;return}if(!e.validateEmail(c.contactoForm.mail.trim())){c.message="El Mail no tiene un formato valido";c.error_code=2;return}if(c.contactoForm.asunto==undefined||c.contactoForm.asunto.trim().length==0){c.message="El asunto es Obligatorio";c.error_code=3;return}if(c.contactoForm.consulta==undefined||c.contactoForm.consulta.trim().length==0){c.message="La consulta es Obligatoria";c.error_code=4;return}h.sendMailConsulta(c.contactoForm,function(n){if(n){c.enviado=true;k.messageConfirm="El mail fue enviado";d(j,3000);c.contactoForm={asunto:"",nombre:"",mail:"",consulta:""}}else{k.messageConfirm="Error enviando el mail"}k.showMessageConfirm=true})}}})();